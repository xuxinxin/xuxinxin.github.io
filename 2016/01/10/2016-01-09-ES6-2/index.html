<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>ES6中的...，默认参数和解构赋值 - 徐鑫鑫的BLOG</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ES6 引入了一个新的操作符 ... ，根据它的使用情况决定是展开或者折叠操作数。
展开/折叠让我们看下面这段代码
12345function foo(x,y,z) &amp;#123;    console.log( x, y, z );&amp;#125;foo( ...[1,2,3] );              // 1 2 3
当 ... 操作符出现在数组前面，它表现为将数组展开成一个个的数。
这种使">
<meta property="og:type" content="article">
<meta property="og:title" content="ES6中的...，默认参数和解构赋值">
<meta property="og:url" content="http://yoursite.com/2016/01/10/2016-01-09-ES6-2/index.html">
<meta property="og:site_name" content="徐鑫鑫的BLOG">
<meta property="og:description" content="ES6 引入了一个新的操作符 ... ，根据它的使用情况决定是展开或者折叠操作数。
展开/折叠让我们看下面这段代码
12345function foo(x,y,z) &amp;#123;    console.log( x, y, z );&amp;#125;foo( ...[1,2,3] );              // 1 2 3
当 ... 操作符出现在数组前面，它表现为将数组展开成一个个的数。
这种使">
<meta property="og:updated_time" content="2016-01-10T06:49:37.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ES6中的...，默认参数和解构赋值">
<meta name="twitter:description" content="ES6 引入了一个新的操作符 ... ，根据它的使用情况决定是展开或者折叠操作数。
展开/折叠让我们看下面这段代码
12345function foo(x,y,z) &amp;#123;    console.log( x, y, z );&amp;#125;foo( ...[1,2,3] );              // 1 2 3
当 ... 操作符出现在数组前面，它表现为将数组展开成一个个的数。
这种使">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/webfonts/font-awesome-4.3.0/css/font-awesome.min.css"/>
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

  <script src="/js/jquery.min.js"></script>
</head>

<body>
  <div id="container">
    <div class="wrap">
      <button id="menu-toggle" class="menu-toggle"><span>Menu</span></button>
      <aside id="sidebar">
    <div class="sidebar-wrap">
        <button class="hide-button">
            <i class="fa fa-angle-double-left"></i>
        </button>
        <button class="close-button fa fa-fw fa-close"></button>
        <div class="logo">
            <span>Star</span>
            <img src="/images/logo-2.png" alt="LOGO"/>
        </div>
        <div class="intro">鲜花与掌声，献给时光</div>
        <nav id="sidebar-nav">
            
            <a href="/"><i class="fa fa-bars"></i>Home</a>
            
            <a href="/archives"><i class="fa fa-bars"></i>Archives</a>
            
            <a href="/categories"><i class="fa fa-bars"></i>Categories</a>
            
            <a href="/tags"><i class="fa fa-bars"></i>Tags</a>
            
        </nav>
        <div id="sidebar-bottom">
            <ul class="social">
                <li><a href=""><i class="fa fa-github"></i></a></li>
                <li><a href=""><i class="fa fa-facebook"></i></a></li>
                <li><a href=""><i class="fa fa-weibo"></i></a></li>
                <li><a href=""><i class="fa fa-qq"></i></a></li>
                <li><a href=""><i class="fa fa-weixin"></i></a></li>
            </ul>
            <footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 star&nbsp;
      - <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
        </div>
    </div>
</aside>
      <section id="main" class="outer ml-has-sidebar"><article id="post-2016-01-09-ES6-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      ES6中的...，默认参数和解构赋值
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2016/01/10/2016-01-09-ES6-2/" class="article-date">
  <time datetime="2016-01-09T16:00:00.000Z" itemprop="datePublished">2016-01-10</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/code/">code</a><span>></span><a class="article-category-link" href="/categories/code/ES6/">ES6</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>ES6 引入了一个新的操作符 <code>...</code> ，根据它的使用情况决定是展开或者折叠操作数。</p>
<h2 id="u5C55_u5F00/_u6298_u53E0"><a href="#u5C55_u5F00/_u6298_u53E0" class="headerlink" title="展开/折叠"></a>展开/折叠</h2><p>让我们看下面这段代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x,y,z</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( x, y, z );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo( ...[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] );              <span class="comment">// 1 2 3</span></span><br></pre></td></tr></table></figure>
<p>当 <code>...</code> 操作符出现在数组前面，它表现为将数组展开成一个个的数。</p>
<p>这种使用方式最典型的情况就是将数组展开成函数的参数。这种使用方式和 <code>apply</code> 类似:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo.apply( <span class="literal">null</span>, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] );     <span class="comment">// 1 2 3</span></span><br></pre></td></tr></table></figure>
<p>同时 <code>...</code> 还可以用作将数组展开到别的上下文中，例如展开到别的数组当中：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">var</span> b = [ <span class="number">1</span>, ...a, <span class="number">5</span> ];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( b );                   <span class="comment">// [1,2,3,4,5]</span></span><br></pre></td></tr></table></figure>
<p>这种使用方式与 <code>[1].concat(a,[5])</code> 一样。</p>
<p>另外一种使用方式，与上面的情况相反，它是将多个数值折叠到一个变量当中，变成一个数组。如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x, y, ...z</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( x, y, z );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo( <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> );           <span class="comment">// 1 2 [3,4,5]</span></span><br></pre></td></tr></table></figure>
<p><code>...z</code> 的意思是将除了<code>x,y</code> 两个之外的参数聚合到数组 <code>z</code> 当中来。 注意这里与第一个例子的区别，展开是函数调用时，将传入的数组参数展开；折叠是函数声明时，将调用可能传入的其他参数聚合到变量中。</p>
<p>所以上面这个例子是 <code>x</code> 赋值为 <code>1</code> ，<code>y</code> 赋值为 <code>2</code>, 其他的 <code>3,4,5</code> 聚合到数组 <code>z</code> 中来。</p>
<p>当然如果没有其他任何命名的参数， <code>...</code> 会把所有参数折叠成一个数组：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( args );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo( <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);            <span class="comment">// [1,2,3,4,5]</span></span><br></pre></td></tr></table></figure>
<p><code>...args</code> 一般被叫做剩余参数(rest parameters)，因为你可以收集剩余的参数，或者说聚集，折叠这些参数。</p>
<p>这种使用方式是JS中以前的类数组参数 <code>arguments</code> 的一个有效的替代。</p>
<p>看一个例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// doing things the new ES6 way</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// `args` is already a real array</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// discard first element in `args`</span></span><br><span class="line">    args.shift();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// pass along all of `args` as arguments</span></span><br><span class="line">    <span class="comment">// to `console.log(..)`</span></span><br><span class="line">    <span class="built_in">console</span>.log( ...args );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// doing things the old-school pre-ES6 way</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// turn `arguments` into a real array</span></span><br><span class="line">    <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call( <span class="built_in">arguments</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// add some elements on the end</span></span><br><span class="line">    args.push( <span class="number">4</span>, <span class="number">5</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// filter out odd numbers</span></span><br><span class="line">    args = args.filter( <span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> v % <span class="number">2</span> == <span class="number">0</span>;</span><br><span class="line">    &#125; );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// pass along all of `args` as arguments</span></span><br><span class="line">    <span class="comment">// to `foo(..)`</span></span><br><span class="line">    foo.apply( <span class="literal">null</span>, args );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bar( <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> );                  <span class="comment">// 2 4</span></span><br></pre></td></tr></table></figure>
<h2 id="u9ED8_u8BA4_u53C2_u6570"><a href="#u9ED8_u8BA4_u53C2_u6570" class="headerlink" title="默认参数"></a>默认参数</h2><p>相信下面这种默认参数的使用方式，你肯定不陌生：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x,y</span>) </span>&#123;</span><br><span class="line">    x = x || <span class="number">11</span>;</span><br><span class="line">    y = y || <span class="number">31</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log( x + y );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo();              <span class="comment">// 42</span></span><br><span class="line">foo( <span class="number">5</span>, <span class="number">6</span> );        <span class="comment">// 11</span></span><br><span class="line">foo( <span class="number">5</span> );           <span class="comment">// 36</span></span><br><span class="line">foo( <span class="literal">null</span>, <span class="number">6</span> );     <span class="comment">// 17</span></span><br></pre></td></tr></table></figure>
<p>但是使用上面的代码，你会遇到一些问题：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo( <span class="number">0</span>, <span class="number">42</span> );       <span class="comment">// 53 &lt;-- Oops, not 42</span></span><br></pre></td></tr></table></figure>
<p>为了修复这个问题，可以做一个更加细致的检查</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x,y</span>) </span>&#123;</span><br><span class="line">    x = (x !== <span class="literal">undefined</span>) ? x : <span class="number">11</span>;</span><br><span class="line">    y = (y !== <span class="literal">undefined</span>) ? y : <span class="number">31</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log( x + y );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo( <span class="number">0</span>, <span class="number">42</span> );           <span class="comment">// 42</span></span><br><span class="line">foo( <span class="literal">undefined</span>, <span class="number">6</span> );    <span class="comment">// 17</span></span><br></pre></td></tr></table></figure>
<p>下面我们看看ES6中加入的默认参数值的语法：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x = 11, y = 31</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( x + y );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo();                  <span class="comment">// 42</span></span><br><span class="line">foo( <span class="number">5</span>, <span class="number">6</span> );            <span class="comment">// 11</span></span><br><span class="line">foo( <span class="number">0</span>, <span class="number">42</span> );           <span class="comment">// 42</span></span><br><span class="line"></span><br><span class="line">foo( <span class="number">5</span> );               <span class="comment">// 36</span></span><br><span class="line">foo( <span class="number">5</span>, <span class="literal">undefined</span> );    <span class="comment">// 36 &lt;-- `undefined` is missing</span></span><br><span class="line">foo( <span class="number">5</span>, <span class="literal">null</span> );         <span class="comment">// 5  &lt;-- null coerces to `0`</span></span><br><span class="line"></span><br><span class="line">foo( <span class="literal">undefined</span>, <span class="number">6</span> );    <span class="comment">// 17 &lt;-- `undefined` is missing</span></span><br><span class="line">foo( <span class="literal">null</span>, <span class="number">6</span> );         <span class="comment">// 6  &lt;-- null coerces to `0`</span></span><br></pre></td></tr></table></figure></p>
<p>注意上面这些函数参数中细微的差别导致的结果的不同。</p>
<p><code>x=11</code> 比起 <code>x||11</code> 更像是 <code>x !== undefined ? x : 11</code> ，所以在使用的过程中要注意这一点。</p>
<h2 id="u9ED8_u8BA4_u8868_u8FBE_u5F0F_u503C"><a href="#u9ED8_u8BA4_u8868_u8FBE_u5F0F_u503C" class="headerlink" title="默认表达式值"></a>默认表达式值</h2><p>函数默认参数值不仅仅是一些简单的字面量，而且还可以是一个有效的表达式，甚至是一个函数调用：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"bar called!"</span> );</span><br><span class="line">    <span class="keyword">return</span> y + val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x = y + 3, z = bar( x </span>)) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( x, z );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> y = <span class="number">5</span>;</span><br><span class="line">foo();                              <span class="comment">// "bar called"</span></span><br><span class="line">                                    <span class="comment">// 8 13</span></span><br><span class="line">foo( <span class="number">10</span> );                          <span class="comment">// "bar called"</span></span><br><span class="line">                                    <span class="comment">// 10 15</span></span><br><span class="line">y = <span class="number">6</span>;</span><br><span class="line">foo( <span class="literal">undefined</span>, <span class="number">10</span> );               <span class="comment">// 9 10</span></span><br></pre></td></tr></table></figure></p>
<p>可以看到这些参数值会在需要的时候进行计算得到，什么叫需要的时候？就是传入的参数省略，或者是 <code>undedined</code> 的时候</p>
<p>要注意到一个细节，函数声明中的参数是在它们自己的作用域而不是函数体的作用域，也就是说，函数参数表达式的变量，首先匹配前面的变量，然后再匹配外部变量。如下的情况：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> w = <span class="number">1</span>, z = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"> x = w + 1, y = x + 1, z = z + 1 </span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( x, y, z );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo();                  <span class="comment">// ReferenceError</span></span><br></pre></td></tr></table></figure></p>
<p><code>w+1</code> 中的 <code>w</code> 首先在括号内找 <code>w</code>，但是没找到，于是它去括号外面找。而 <code>x+1</code> 中的 <code>x</code> 已经在括号内找到，就不要到括号外面去找。</p>
<p><code>z+1</code>中的<code>z</code>在括号内找到了，但是呢没有被初始化。于是就会引起一个错误。</p>
<h2 id="u89E3_u6784_u8D4B_u503C"><a href="#u89E3_u6784_u8D4B_u503C" class="headerlink" title="解构赋值"></a>解构赋值</h2><p>ES6引入了一个语法特性叫做解构赋值，看下面的代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> tmp = foo(),</span><br><span class="line">    a = tmp[<span class="number">0</span>], b = tmp[<span class="number">1</span>], c = tmp[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( a, b, c );             <span class="comment">// 1 2 3</span></span><br></pre></td></tr></table></figure>
<p>我们把 <code>foo()</code> 函数返回的结果数组分别赋值给变量 <code>a</code>, <code>b</code>, <code>c</code> 。这种赋值叫做结构化赋值（<em>structured assignment</em>）</p>
<p>还有一种对象结构化赋值：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        x: <span class="number">4</span>,</span><br><span class="line">        y: <span class="number">5</span>,</span><br><span class="line">        z: <span class="number">6</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> tmp = bar(),</span><br><span class="line">    x = tmp.x, y = tmp.y, z = tmp.z;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( x, y, z );             <span class="comment">// 4 5 6</span></span><br></pre></td></tr></table></figure>
<p>我们看看解构赋值的形式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> [ a, b, c ] = foo();</span><br><span class="line"><span class="keyword">var</span> &#123; x: x, y: y, z: z &#125; = bar();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( a, b, c );             <span class="comment">// 1 2 3</span></span><br><span class="line"><span class="built_in">console</span>.log( x, y, z );             <span class="comment">// 4 5 6</span></span><br></pre></td></tr></table></figure>
<h4 id="u5BF9_u8C61_u5C5E_u6027_u8D4B_u503C_u6A21_u5F0F"><a href="#u5BF9_u8C61_u5C5E_u6027_u8D4B_u503C_u6A21_u5F0F" class="headerlink" title="对象属性赋值模式"></a>对象属性赋值模式</h4><p>让我们深入挖掘一下之前的 <code>{x:x,...}</code> 语法，如果属性名和你想要赋值的属性名一致，则可以写得更加简洁：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> &#123; x, y, z &#125; = bar();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( x, y, z );             <span class="comment">// 4 5 6</span></span><br></pre></td></tr></table></figure>
<p>有时候我们希望赋值给不同的变量，那么可以使用一种冗长的形式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> &#123; x: bam, y: baz, z: bap &#125; = bar();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( bam, baz, bap );       <span class="comment">// 4 5 6</span></span><br><span class="line"><span class="built_in">console</span>.log( x, y, z );             <span class="comment">// ReferenceError</span></span><br></pre></td></tr></table></figure>
<p>要注意上面的一个细节，冒号左边是值，右边的要赋值的变量。</p>
<h4 id="u4E0D_u4EC5_u4EC5_u662F_u58F0_u660E"><a href="#u4E0D_u4EC5_u4EC5_u662F_u58F0_u660E" class="headerlink" title="不仅仅是声明"></a>不仅仅是声明</h4><p>解构是一个一般性的赋值操作，不仅仅是一个声明：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a, b, c, x, y, z;</span><br><span class="line"></span><br><span class="line">[a,b,c] = foo();</span><br><span class="line">( &#123; x, y, z &#125; = bar() );</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( a, b, c );             <span class="comment">// 1 2 3</span></span><br><span class="line"><span class="built_in">console</span>.log( x, y, z );             <span class="comment">// 4 5 6</span></span><br></pre></td></tr></table></figure>
<p>在上面的例子中，变量已经被声明了，我们做的是赋值。</p>
<h4 id="u914D_u5408"><a href="#u914D_u5408" class="headerlink" title="配合<code>...</code>"></a>配合<code>...</code></h4><p>解构赋值还可以和 <code>...</code> 操作符结合:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">var</span> [ b, ...c ] = a;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( b, c );                <span class="comment">// 2 [3,4]</span></span><br></pre></td></tr></table></figure>
<p>这里 <code>...</code> 可以将数组解构，在ES6中并不能用于对象的解构</p>
<h4 id="u914D_u5408_u9ED8_u8BA4_u503C"><a href="#u914D_u5408_u9ED8_u8BA4_u503C" class="headerlink" title="配合默认值"></a>配合默认值</h4><p>解构也可以提供默认值：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> [ a = <span class="number">3</span>, b = <span class="number">6</span>, c = <span class="number">9</span>, d = <span class="number">12</span> ] = foo();</span><br><span class="line"><span class="keyword">var</span> &#123; x = <span class="number">5</span>, y = <span class="number">10</span>, z = <span class="number">15</span>, w = <span class="number">20</span> &#125; = bar();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( a, b, c, d );          <span class="comment">// 1 2 3 12</span></span><br><span class="line"><span class="built_in">console</span>.log( x, y, z, w );          <span class="comment">// 4 5 6 20</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> &#123; x, y, z, w: WW = <span class="number">20</span> &#125; = bar();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( x, y, z, WW );         <span class="comment">// 4 5 6 20</span></span><br></pre></td></tr></table></figure>
<h3 id="u5BF9_u8C61_u5B57_u9762_u91CF_u8868_u8FBE_u5F0F"><a href="#u5BF9_u8C61_u5B57_u9762_u91CF_u8868_u8FBE_u5F0F" class="headerlink" title="对象字面量表达式"></a>对象字面量表达式</h3><p>ES6对对象字面量增加了一些扩展。 如果属性名和变量名一样，可以像上面一样使用简洁的赋值方式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">2</span>, y = <span class="number">3</span>,</span><br><span class="line">    o = &#123;</span><br><span class="line">        x,</span><br><span class="line">        y</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>
<p>如果属性值是函数，可以简单的这么定义：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    x() &#123;</span><br><span class="line">        <span class="comment">// ..</span></span><br><span class="line">    &#125;,</span><br><span class="line">    y() &#123;</span><br><span class="line">        <span class="comment">// ..</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="u603B_u7ED3"><a href="#u603B_u7ED3" class="headerlink" title="总结"></a>总结</h2><p>本文介绍了ES6中的 <code>...</code> 与解构赋值。 <code>...</code> 在不同情况下有不同的表现，有时是折叠操作数，有时是展开操作数。在函数声明的时候是聚集传过来的操作数，在函数调用的时候是将数组展开为参数传入函数。</p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES6/">ES6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/">JS</a></li></ul>

      </footer>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/01/10/2016-01-10-ES6-3/" id="article-nav-newer" class="article-nav-link-wrap">
      <div class="article-nav-title"><span>&lt;</span>&nbsp;
        
          ES6中的对象与字符串
        
      </div>
    </a>
  
  
    <a href="/2016/01/09/2016-01-09-ES6-1/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">ES6中的块作用域&nbsp;<span>&gt;</span></div>
    </a>
  
</nav>

  
</article>


<section id="comments">
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="post-2016-01-09-ES6-2" data-title="ES6中的...，默认参数和解构赋值" data-url="http://yoursite.com/2016/01/10/2016-01-09-ES6-2/">

    </div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
        var duoshuoQuery = {short_name:'starow'};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0]
            || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
    <!-- 多说公共JS代码 end -->
</section>
</section>
    </div>
    




  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>
  </div>
</body>